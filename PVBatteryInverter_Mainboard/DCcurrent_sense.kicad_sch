(kicad_sch (version 20230121) (generator eeschema)

  (uuid 6877223e-c632-421e-9f5e-a824f6f78e77)

  (paper "A4")

  (lib_symbols
    (symbol "Connector:Screw_Terminal_01x02" (pin_names (offset 1.016) hide) (in_bom yes) (on_board yes)
      (property "Reference" "J" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "Screw_Terminal_01x02" (at 0 -5.08 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "screw terminal" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Generic screw terminal, single row, 01x02, script generated (kicad-library-utils/schlib/autogen/connector/)" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "TerminalBlock*:*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "Screw_Terminal_01x02_1_1"
        (rectangle (start -1.27 1.27) (end 1.27 -3.81)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
        (circle (center 0 -2.54) (radius 0.635)
          (stroke (width 0.1524) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -0.5334 -2.2098)
            (xy 0.3302 -3.048)
          )
          (stroke (width 0.1524) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -0.5334 0.3302)
            (xy 0.3302 -0.508)
          )
          (stroke (width 0.1524) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -0.3556 -2.032)
            (xy 0.508 -2.8702)
          )
          (stroke (width 0.1524) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -0.3556 0.508)
            (xy 0.508 -0.3302)
          )
          (stroke (width 0.1524) (type default))
          (fill (type none))
        )
        (circle (center 0 0) (radius 0.635)
          (stroke (width 0.1524) (type default))
          (fill (type none))
        )
        (pin passive line (at -5.08 0 0) (length 3.81)
          (name "Pin_1" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -5.08 -2.54 0) (length 3.81)
          (name "Pin_2" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:C" (pin_numbers hide) (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.635 2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C" (at 0.635 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (at 0.9652 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "cap capacitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Unpolarized capacitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "C_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_0_1"
        (polyline
          (pts
            (xy -2.032 -0.762)
            (xy 2.032 -0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.032 0.762)
            (xy 2.032 0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:R" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Sensor_Current:MCA1101-50-5" (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 3.81 13.97 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "MCA1101-50-5" (at 3.81 11.43 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_SO:SOIC-16W_7.5x10.3mm_P1.27mm" (at 7.62 -5.08 0)
        (effects (font (size 1.27 1.27) italic) (justify left) hide)
      )
      (property "Datasheet" "https://navview.blob.core.windows.net/web-resources/6020-1102-01%20RevF_MCA1101_20210408.pdf?_t=1618576890367" (at 0 -25.4 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "hall effect current monitor sensor isolated" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "±40A Bidirectional Hall-Effect Current Sensor, +5.0V supply, 50mV/A, SOIC-16" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "SOIC*7.5x10.3mm*P1.27mm*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "MCA1101-50-5_0_1"
        (rectangle (start -7.62 8.89) (end 7.62 -8.89)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "MCA1101-50-5_1_1"
        (polyline
          (pts
            (xy -2.54 8.89)
            (xy -2.54 -8.89)
          )
          (stroke (width 0) (type dash))
          (fill (type none))
        )
        (pin passive line (at -10.16 3.81 0) (length 2.54)
          (name "IP+" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 11.43 270) (length 2.54)
          (name "VCC" (effects (font (size 1.27 1.27))))
          (number "10" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -11.43 90) (length 2.54) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "11" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 10.16 7.62 180) (length 2.54)
          (name "Vout" (effects (font (size 1.27 1.27))))
          (number "12" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 10.16 5.08 180) (length 2.54)
          (name "Vref" (effects (font (size 1.27 1.27))))
          (number "13" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 3.81 -11.43 90) (length 2.54)
          (name "GND2" (effects (font (size 1.27 1.27))))
          (number "14" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -11.43 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "15" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 10.16 -1.27 180) (length 2.54)
          (name "VOC" (effects (font (size 1.27 1.27))))
          (number "16" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 3.81 0) (length 2.54) hide
          (name "IP+" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 3.81 0) (length 2.54) hide
          (name "IP+" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 3.81 0) (length 2.54) hide
          (name "IP+" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 -3.81 0) (length 2.54)
          (name "IP-" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 -3.81 0) (length 2.54) hide
          (name "IP-" (effects (font (size 1.27 1.27))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 -3.81 0) (length 2.54) hide
          (name "IP-" (effects (font (size 1.27 1.27))))
          (number "7" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -10.16 -3.81 0) (length 2.54) hide
          (name "IP-" (effects (font (size 1.27 1.27))))
          (number "8" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 10.16 1.27 180) (length 2.54)
          (name "~{FAULTB}" (effects (font (size 1.27 1.27))))
          (number "9" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:+5V" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "+5V" (at 0 3.556 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "global power" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"+5V\"" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "+5V_0_1"
        (polyline
          (pts
            (xy -0.762 1.27)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.54)
            (xy 0.762 1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "+5V_1_1"
        (pin power_in line (at 0 0 90) (length 0) hide
          (name "+5V" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "global power" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GND\" , ground" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GNDA" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GNDA" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "global power" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GNDA\" , analog ground" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GNDA_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "GNDA_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GNDA" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 110.49 90.17) (diameter 0) (color 0 0 0 0)
    (uuid 417b2298-d0aa-4e0e-a97b-d9260f0a4b12)
  )
  (junction (at 139.7 68.58) (diameter 0) (color 0 0 0 0)
    (uuid 7c1e38c7-5808-4486-a8f9-964fb5937201)
  )
  (junction (at 127 96.52) (diameter 0) (color 0 0 0 0)
    (uuid 9cf38151-2828-45a2-a022-29b96ae92504)
  )
  (junction (at 115.57 45.72) (diameter 0) (color 0 0 0 0)
    (uuid e37cc84e-1308-475d-986c-7c7072f280c3)
  )
  (junction (at 107.95 90.17) (diameter 0) (color 0 0 0 0)
    (uuid fcbb6e3e-f8a5-42d0-be4a-23afef8b5552)
  )

  (no_connect (at 116.84 71.12) (uuid ce6efbf5-6704-442a-90d2-9cf51a728804))

  (wire (pts (xy 116.84 77.47) (xy 116.84 90.17))
    (stroke (width 0) (type default))
    (uuid 01ca4571-bcec-4412-9957-a226987375b4)
  )
  (wire (pts (xy 115.57 44.45) (xy 115.57 45.72))
    (stroke (width 0) (type default))
    (uuid 0d4ff558-f5ea-459f-a127-5d3d97d7ebe3)
  )
  (wire (pts (xy 127 96.52) (xy 129.54 96.52))
    (stroke (width 0) (type default))
    (uuid 141f7e14-2ae2-4d3d-9080-21f5d9429d1f)
  )
  (wire (pts (xy 106.68 90.17) (xy 107.95 90.17))
    (stroke (width 0) (type default))
    (uuid 1a566959-966f-438c-967b-e12618d95247)
  )
  (wire (pts (xy 139.7 77.47) (xy 139.7 78.74))
    (stroke (width 0) (type default))
    (uuid 1e5b8bc5-d256-4245-8fab-35ba0252ea17)
  )
  (wire (pts (xy 106.68 45.72) (xy 115.57 45.72))
    (stroke (width 0) (type default))
    (uuid 29916f01-aa19-448d-957c-741c14e44bac)
  )
  (wire (pts (xy 120.65 96.52) (xy 127 96.52))
    (stroke (width 0) (type default))
    (uuid 2c1a76e5-fadc-4b08-baf9-ce81d9d5a9ea)
  )
  (wire (pts (xy 76.2 77.47) (xy 86.36 77.47))
    (stroke (width 0) (type default))
    (uuid 3fd9b7c2-63c3-4822-ae67-4a845cd7fed6)
  )
  (wire (pts (xy 139.7 68.58) (xy 147.32 68.58))
    (stroke (width 0) (type default))
    (uuid 4f9914a9-6bdb-4e82-bef0-a3ee95ed7470)
  )
  (wire (pts (xy 86.36 80.01) (xy 96.52 80.01))
    (stroke (width 0) (type default))
    (uuid 54db8185-a771-463b-a4f8-9f1981f30757)
  )
  (wire (pts (xy 116.84 74.93) (xy 120.65 74.93))
    (stroke (width 0) (type default))
    (uuid 558f833b-265f-436a-9cdf-306c77338da1)
  )
  (wire (pts (xy 107.95 90.17) (xy 110.49 90.17))
    (stroke (width 0) (type default))
    (uuid 6bbbce1d-a414-4b48-a7e1-cebddfe5f696)
  )
  (wire (pts (xy 86.36 77.47) (xy 86.36 80.01))
    (stroke (width 0) (type default))
    (uuid 72b96c74-d289-4b73-8b5b-83e0f35f63a6)
  )
  (wire (pts (xy 115.57 45.72) (xy 115.57 46.99))
    (stroke (width 0) (type default))
    (uuid 72ee03e1-c212-4185-b9b3-855c0a8baaba)
  )
  (wire (pts (xy 86.36 74.93) (xy 76.2 74.93))
    (stroke (width 0) (type default))
    (uuid 7cd5cea2-92c1-48fb-9ac9-1d821e6c1fc8)
  )
  (wire (pts (xy 96.52 72.39) (xy 86.36 72.39))
    (stroke (width 0) (type default))
    (uuid 8faeb545-6e65-49d8-a8db-90f6217fd297)
  )
  (wire (pts (xy 135.89 68.58) (xy 139.7 68.58))
    (stroke (width 0) (type default))
    (uuid 9cee7c08-86b5-4755-b507-1dce2840c047)
  )
  (wire (pts (xy 107.95 91.44) (xy 107.95 90.17))
    (stroke (width 0) (type default))
    (uuid b6de3651-b529-4f6f-91c4-fbe66c2115dd)
  )
  (wire (pts (xy 110.49 87.63) (xy 110.49 90.17))
    (stroke (width 0) (type default))
    (uuid bbcbf206-ab20-4c39-a81a-04685c01e37e)
  )
  (wire (pts (xy 106.68 45.72) (xy 106.68 64.77))
    (stroke (width 0) (type default))
    (uuid c6251c39-39db-483d-92b8-80b8531b1cfb)
  )
  (wire (pts (xy 139.7 68.58) (xy 139.7 69.85))
    (stroke (width 0) (type default))
    (uuid d1d43017-65f9-48ba-a97a-2b747f3ac14d)
  )
  (wire (pts (xy 127 95.25) (xy 127 96.52))
    (stroke (width 0) (type default))
    (uuid d42838d1-1576-489d-84bc-158aec7804bc)
  )
  (wire (pts (xy 86.36 72.39) (xy 86.36 74.93))
    (stroke (width 0) (type default))
    (uuid d9e22f1c-4ccf-41e6-b5bc-c4bd8190d292)
  )
  (wire (pts (xy 106.68 90.17) (xy 106.68 87.63))
    (stroke (width 0) (type default))
    (uuid dc81c904-4b58-436d-842c-0f8f0648456c)
  )
  (wire (pts (xy 120.65 74.93) (xy 120.65 96.52))
    (stroke (width 0) (type default))
    (uuid de78af60-798a-40fc-bb40-d97f85f37637)
  )
  (wire (pts (xy 116.84 68.58) (xy 128.27 68.58))
    (stroke (width 0) (type default))
    (uuid ea0676cb-3942-4279-83f2-fe2c0df08548)
  )
  (wire (pts (xy 116.84 90.17) (xy 110.49 90.17))
    (stroke (width 0) (type default))
    (uuid f82eb34e-5021-4e6e-8340-ed33b78f717d)
  )
  (wire (pts (xy 127 86.36) (xy 127 87.63))
    (stroke (width 0) (type default))
    (uuid fcc41330-3f9b-469f-aeb8-315f93424768)
  )

  (text "20A Version; Vref_ADC=3.3V; single ended; negative currentsense:\nVout=2.175V + I*90mV/A\nIpv=-12.3A -> 1.068V\n(2.175-1.068)÷3.3×2^12=1374LSB\n->9mA resolution\nVpv=290V -> 2.6W\n-> negative PV current up to (3.3-2.175)/0.09=12.5A"
    (at 173.99 97.79 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 10ffc4fa-08d2-468d-a4d1-89873dd412ba)
  )
  (text "50A Version:\nVout=2.175V + I*35mV/A\nIpv=12.3A -> 2.6055V\n(2.6055−2.175)÷(2×3,3)×2^12=267LSB\n->46mA resolution\nVpv=290V -> 13.3W"
    (at 203.2 29.21 0)
    (effects (font (size 1.27 1.27) italic) (justify left bottom))
    (uuid 551941a2-24b8-4eec-bfd8-d96ac296101a)
  )
  (text "Vcc=5V\nTypical current consumption: 6.5mA\n-> 33mW" (at 128.27 52.705 0)
    (effects (font (size 1.27 1.27) (thickness 0.254) bold) (justify left bottom))
    (uuid 7b3019c6-e558-4e44-a123-2053d95afc8c)
  )
  (text "20A Version:\nVout=2.175V + I*90mV/A\nIpv=12.3A -> 3.282V\n(3.282−2.175)÷(2×3,3)×2^12=687LSB\n->18mA resolution\nVpv=290V -> 5.2W"
    (at 245.11 29.21 0)
    (effects (font (size 1.27 1.27) italic) (justify left bottom))
    (uuid 7f101113-bdb6-4f02-8b90-1d1702daf5af)
  )
  (text "Power consumption:\nP_MCA1101 = 0.033W\n\nP = 0.033W" (at 259.08 176.53 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid a1c20620-3e44-4f10-9ea5-738763439c59)
  )
  (text "not possible!\nADC has 1.65V+0.18V Common Mode!" (at 223.52 34.29 0)
    (effects (font (size 1.27 1.27) (thickness 0.254) bold) (justify left bottom))
    (uuid b48618e3-9d10-495e-b7d7-65bee5b50f0e)
  )
  (text "50A Version; Vref_ADC=3.3V; single ended; negative currentsense:\nVout=2.175V + I*35mV/A\nIpv=-12.3A -> 1.7445V\n(1.7445-2.175)÷3.3×2^12=534LSB\n->23mA resolution\nVpv=290V -> 6.7W\n-> negative PV current up to (3.3-2.175)/0.035=32,1A"
    (at 173.99 116.84 0)
    (effects (font (size 1.27 1.27) (thickness 0.254) bold) (justify left bottom))
    (uuid bd352e91-dcc4-442d-a52d-36691c330ddc)
  )
  (text "Lowpass:\nf=1/(2*PI*R*C)\n =1/(2*PI*220*2.2n)=329kHz"
    (at 138.43 66.04 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid ed1f73af-2ed8-46da-95aa-d3c5005c64d6)
  )
  (text "20A Version; Vref_ADC=Vref; single ended; negative currentsense:\nVout=2.175V + I*90mV/A\nIpv=-12.3A -> 1.068V\n(2.175-1.068)÷2.175×2^12=2085LSB\n->5.9mA resolution\nVpv=290V -> 1.7W\n-> no negative PV currents"
    (at 173.99 77.47 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid f320363a-a310-4c08-acd6-217452b96ad1)
  )

  (label "CS-" (at 78.74 77.47 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 5c3e30f8-08ae-4612-a506-48d121cbfd8e)
  )
  (label "CS+" (at 78.74 74.93 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid ae702d97-a953-413e-aa28-26ceb357178c)
  )

  (hierarchical_label "Ipv_{+}" (shape input) (at 147.32 68.58 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 5f055726-6941-45f3-9b97-90d4fd36e3cb)
  )
  (hierarchical_label "nFAULT_{MCA1101}" (shape output) (at 129.54 96.52 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 626de0d9-bb3d-4da5-a9aa-ac8fe5b84a6b)
  )

  (netclass_flag "" (length 2.54) (shape round) (at 86.36 72.39 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 1a0741b1-7f5c-4b89-8fdb-0bc048ecee98)
    (property "Netclass" "HV_power" (at 87.0585 69.85 0)
      (effects (font (size 1.27 1.27) italic) (justify left))
    )
  )
  (netclass_flag "" (length 2.54) (shape round) (at 86.36 80.01 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right bottom))
    (uuid f4408c1c-61c9-4cbb-a054-108ee10d9623)
    (property "Netclass" "HV_power" (at 87.0585 82.55 0)
      (effects (font (size 1.27 1.27) italic) (justify left))
    )
  )

  (symbol (lib_id "Device:C") (at 139.7 73.66 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 10a743d9-b4a9-4bb4-8838-e6b7c2f1889e)
    (property "Reference" "C30" (at 143.51 72.39 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "2n2" (at 143.51 74.93 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0603_1608Metric" (at 140.6652 77.47 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 139.7 73.66 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid c2cb14d7-2468-4d7e-8440-d347fd0bf4d3))
    (pin "2" (uuid 94d1423d-f6b5-4504-9da2-991ec8ba7c5b))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "C30") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "C502") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:+5V") (at 127 86.36 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 1bb2a15b-5db5-486a-b366-09e28383d7fd)
    (property "Reference" "#PWR033" (at 127 90.17 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "+5V" (at 127 81.28 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "" (at 127 86.36 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 127 86.36 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 5626ccea-3122-4062-b22c-b35503b123f6))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "#PWR033") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "#PWR0504") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Sensor_Current:MCA1101-50-5") (at 106.68 76.2 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 1c9e960d-0e57-4771-83e6-fbc89831df6f)
    (property "Reference" "U6" (at 108.8741 61.976 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "MCA1101-50-5" (at 108.8741 64.516 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_SO:SOIC-16W_7.5x10.3mm_P1.27mm" (at 114.3 81.28 0)
      (effects (font (size 1.27 1.27) italic) (justify left) hide)
    )
    (property "Datasheet" "https://navview.blob.core.windows.net/web-resources/6020-1102-01%20RevF_MCA1101_20210408.pdf?_t=1618576890367" (at 106.68 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 26c36ede-8ce1-4565-9446-ae2fad62f5a9))
    (pin "10" (uuid cc38031b-c882-4730-8140-ac5b0f910358))
    (pin "11" (uuid bba3e691-9577-44d9-ae23-d1c6a046c14f))
    (pin "12" (uuid f52814ce-4aa8-4470-9677-49532af18bb9))
    (pin "13" (uuid 1f90a330-8aa7-4cc7-b97e-aa220ad3a961))
    (pin "14" (uuid 32d7ec02-93d3-42e3-bd30-d35072d64e19))
    (pin "15" (uuid f02fb852-435c-4099-8f9d-4b9f153ab5e7))
    (pin "16" (uuid 12595a67-fcdb-43eb-b8b9-0e02d2b7723f))
    (pin "2" (uuid 2182b8c2-60c6-4fcb-b6cd-de4cb1c7b0f7))
    (pin "3" (uuid 0c2cdb66-b469-4ffc-891e-ad7e48c16555))
    (pin "4" (uuid 60ffc1b3-da83-4d3a-bd96-eb291f01c394))
    (pin "5" (uuid 807c5e8e-1d96-418b-9851-1a9fe9459ee5))
    (pin "6" (uuid 2f940ba2-0a2c-4001-846c-91ca289661db))
    (pin "7" (uuid 4cb4d428-1e60-4064-9788-76b161cbc7ba))
    (pin "8" (uuid ac940482-33ac-4d45-bbd0-3262e7b020c3))
    (pin "9" (uuid 2ecf5889-35c8-4bb7-bcbd-77ff14c6df7f))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "U6") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "U501") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:GNDA") (at 139.7 78.74 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 3a411bb8-4498-4269-8a49-a504dfb49a92)
    (property "Reference" "#PWR0106" (at 139.7 85.09 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GNDA" (at 139.7 83.185 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "" (at 139.7 78.74 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 139.7 78.74 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 9a4812dd-2e31-45a5-9e5f-50eba88ad4b5))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450"
          (reference "#PWR0106") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "#PWR0505") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:+5V") (at 115.57 44.45 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 3f209caf-02e4-41a8-9f02-568bb445a0a7)
    (property "Reference" "#PWR030" (at 115.57 48.26 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "+5V" (at 115.57 39.37 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "" (at 115.57 44.45 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 115.57 44.45 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid b6c4a551-fbb4-430d-b0f1-a49f9ca33af8))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "#PWR030") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "#PWR0502") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:C") (at 115.57 50.8 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 44bf1cd2-a3d6-455a-9377-f7452f38763f)
    (property "Reference" "C29" (at 119.38 49.53 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100n" (at 119.38 52.07 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0603_1608Metric" (at 116.5352 54.61 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 115.57 50.8 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid fec1fa13-d515-477e-a366-652f6b5135ac))
    (pin "2" (uuid ccdfa301-88f7-4d18-80cd-8988e6609369))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "C29") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "C501") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 132.08 68.58 90) (mirror x) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 48d3591c-abe9-4d8b-acb4-1ac70aa51913)
    (property "Reference" "R1" (at 132.08 64.135 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "220" (at 132.08 66.04 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 132.08 66.802 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 132.08 68.58 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 95039865-ba9f-48ae-bd3e-9b9910b1f271))
    (pin "2" (uuid ee1616b5-64a4-4764-a7b9-f692bbd2e3a4))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "R1") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "R502") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:GND") (at 115.57 54.61 0) (mirror y) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 4953a0c8-1d90-4bed-a908-e8343c1467b6)
    (property "Reference" "#PWR032" (at 115.57 60.96 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (at 115.57 59.69 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "" (at 115.57 54.61 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 115.57 54.61 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 345d1422-7bcd-446c-bf26-45661dbdc9bc))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "#PWR032") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "#PWR0503") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:GND") (at 107.95 91.44 0) (mirror y) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 72663dc6-0458-4569-b2b6-f14e0e5d80f6)
    (property "Reference" "#PWR034" (at 107.95 97.79 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (at 107.95 96.52 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "" (at 107.95 91.44 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 107.95 91.44 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid f32a287c-593c-4b2f-8f61-f4a515683525))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "#PWR034") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "#PWR0501") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Connector:Screw_Terminal_01x02") (at 71.12 74.93 0) (mirror y) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid bf443ca8-ad99-4ac7-b390-3128951e26f3)
    (property "Reference" "J103" (at 71.12 83.82 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "Current sense" (at 71.12 81.28 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-2-5.08_1x02_P5.08mm_Horizontal" (at 71.12 74.93 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 71.12 74.93 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 164671bf-ee71-447f-940b-a91c99e0b3cd))
    (pin "2" (uuid 0b60493b-6ad6-4005-a9f2-7fcfc5ca59c5))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450"
          (reference "J103") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "J502") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 127 91.44 0) (mirror x) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid d789e871-8d2b-4fe1-9e6b-5be749e2aa48)
    (property "Reference" "R3" (at 122.555 91.44 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "10k" (at 124.46 91.44 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 125.222 91.44 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 127 91.44 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid cdd8a0eb-7739-4e9a-b042-8bdb345e9a82))
    (pin "2" (uuid f8eefc23-67bb-42ac-adc6-0011b302ea57))
    (instances
      (project "PVBatteryInverter_Mainboard"
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/40bc38fd-52e1-4f4c-8a2a-271b3f25667e"
          (reference "R3") (unit 1)
        )
        (path "/ad76d7cc-a63c-4cf4-838d-c27316b74450/4060d6a0-8427-4d38-b6e2-c7af9f7bbbd6"
          (reference "R501") (unit 1)
        )
      )
    )
  )
)
